# Lab 3 Report

In this lab report, we will explore some of the options offered by the versatile
`grep` command. In its simplest form, this command lets one find sources which
contain specific patterns of text.

We will exemplify the commands on the `written_2` directory (download the
repository [here](https://github.com/ucsd-cse15l-w23/skill-demo1-data)).

## Recursive Search `-r`

In large databases of text or source code, it is often necessary to search
patterns in every file in every subdirectory of the database. The `-r` option
lets us to exatly this with the `grep` command; `grep -r <pattern>`, where
`<pattern>` is the desired pattern to search for.

This option is very convenient for searching within directories:

```
$ ls
written_2

$ grep -r Lucayan written_2/
written_2/travel_guides/berlitz2/Bahamas-WhereToGo.txt:Lucaya is set on a fine sandy beach and the expansive Port Lucaya marina gives the whole resort a very nautical feel. A number of large hotels line the Lucayan Beach, their massive façades softened by the hundreds of masts of the yachts moored on the inlet. As of late 1999, the casinos and many of the hotels were being given a facelift and three of the larger hotels on the waterfront were being reconfigured into a single complex.
written_2/travel_guides/berlitz2/Bahamas-WhereToGo.txt:Just north of the Marina is the Lucayan Golf and Country Club, which has some of the best-groomed greens in the Bahamas and a very good restaurant for those who want to watch rather than play — diners enjoy panoramic views over the driving range and several holes.
written_2/travel_guides/berlitz2/Bahamas-WhereToGo.txt:After traveling approximately 10 miles on the main road you’ll come to Lucaya National Park (there’s a small parking lot on your left). The 40-acre (16-hectare) park sits on both sides of the main road and protects a range of Bahamian ecosystems. Inland, trails lead to one of the largest surveyed cave systems in the world, much of which lies underwater. Ben’s Cave, also known as Bats Cave for reasons that will be obvious when you enter, is the most accessible and in fact rather small. It links to the larger caves through subterranean tunnels. The pool in the bottom has layers of fresh water lying on top of salt water. Remains of several Lucayan Indians that were found at the cave entrance are now being studied in Nassau. The caves are also home to a rare species of crustacean, spelonectes Lucayensis, which is said to resemble a swimming centipede. Ben’s Cave is closed during June and July to protect the bats during the breeding season.
written_2/travel_guides/berlitz2/Bahamas-WhereToGo.txt:Heading west from Freeport-Lucaya, you’ll first travel past the cruise port and container port. Across from the entrance to the cruise port is Pier One Restaurant, where you can enjoy wonderful food and feed the sharks that gather underneath the terraces in the evening. Farther west, at Deadman’s Reef, are the remains of an ancient Lucayan settlement discovered in 1996.
written_2/travel_guides/berlitz2/Bahamas-WhereToGo.txt:Modern Bahamian history began on this island in 1648 when the Eleutherian Adventurers, led by William Sayle, arrived from Britain and Bermuda and founded their shaky colony. They landed near the site of Governor’s Harbour on the middle of the island, but after a period of feuding Sayle and some of his followers moved north to Harbour Island and Spanish Wells. Their descendants still live there today. Although they named the island Eleuthera, you may find that the local people call the island Cigatoo, its old Lucayan name.
written_2/travel_guides/berlitz2/Bahamas-WhereToGo.txt:The name Exuma is said to be a derivation of the two Lucayan Indian words that had been used for this group of islands, yumey and suma. The largest Exuma Cays were settled by British Loyalists following the American Revolution. Chief among these was Dennis Rolle, who brought over 100 slaves with him to start a cotton plantation. This venture began to fail after only a few years but Dennis passed the land onto his son John. In 1834 slavery was abolished and John Rolle freed his slaves and deeded the Rolle land on to them “in commonage” at his death. This allowed only those directly related to the Rolle slaves to farm or build on the inherited land. Today most of the native inhabitants of the Exumas bear the family name Rolle.
written_2/travel_guides/berlitz2/Bahamas-WhereToGo.txt:The Spaniards wiped out the population of Lucayan Indians who lived here, and the island remained unpopulated for over 200 years, until it was settled by a number of Loyalist families from the American colonies. They attempted to grow cotton in the thin layer of soil but were unsuccessful, and at the announcement of emancipation they abandoned the island, leaving their slaves behind.
written_2/travel_guides/berlitz2/Bahamas-WhereToGo.txt:Traveling south from Stella Maris you’ll pass uninhabited mangrove swamps on the way to the small town of Simms, an unhurried old settlement known for its distinctive straw-work, which craftswomen are delighted to show visitors. At Deadman’s Cay you’ll find an extensive cave system with faded Lucayan rock drawings. After passing small pineapple and banana plantations, you’ll reach attractive Clarence Town, with its two large churches — one Anglican, the other Roman Catholic — built by Cat Island hermit architect Father Jerome. The blue hole at nearby Turtle Cove, a half-mile walk from the road over rough terrain, provides a memorable diving experience, though it’s interesting even from the rim. The hole is about 80 yards (73 m) across and at least 600 ft (183 m) deep; you’ll sometimes see large turtles and tarpon in the waters.
written_2/travel_guides/berlitz2/Bahamas-History.txt:Centuries before the arrival of Columbus, a peaceful Amerindian people who called themselves the Luccucairi had settled in the Bahamas. Originally from South America, they had traveled up through the Caribbean islands, surviving by cultivating modest crops and from what they caught from sea and shore. Nothing in the experience of these gentle people could have prepared them for the arrival of the Pinta, the Niña, and the Santa Maria at San Salvador on 12 October 1492. Columbus believed that he had reached the East Indies and mistakenly called these people Indians. We know them today as the Lucayans. Columbus claimed the island and others in the Bahamas for his royal Spanish patrons, but not finding the gold and other riches he was seeking, he stayed for only two weeks before sailing towards Cuba.
written_2/travel_guides/berlitz2/Bahamas-History.txt:The Spaniards never bothered to settle in the Bahamas, but the number of shipwrecks attest that their galleons frequently passed through the archipelago en route to and from the Caribbean, Florida, Bermuda, and their home ports. On Eleuthera the explorers dug a fresh-water well — at a spot now known as “Spanish Wells” — which was used to replenish the supplies of water on their ships before they began the long journey back to Europe with their cargoes of South American gold. As for the Lucayans, within 25 years all of them, perhaps some 30,000 people, were removed from the Bahamas to work — and die — in Spanish gold mines and on farms and pearl fisheries on Hispaniola (Haiti), Cuba, and elsewhere in the Caribbean.
```

When applied for single-file searches, this option does not perform any
additional action:

```
$ grep -r Lucayan written_2/travel_guides/berlitz2/Bahamas-History.txt
Centuries before the arrival of Columbus, a peaceful Amerindian people who called themselves the Luccucairi had settled in the Bahamas. Originally from South America, they had traveled up through the Caribbean islands, surviving by cultivating modest crops and from what they caught from sea and shore. Nothing in the experience of these gentle people could have prepared them for the arrival of the Pinta, the Niña, and the Santa Maria at San Salvador on 12 October 1492. Columbus believed that he had reached the East Indies and mistakenly called these people Indians. We know them today as the Lucayans. Columbus claimed the island and others in the Bahamas for his royal Spanish patrons, but not finding the gold and other riches he was seeking, he stayed for only two weeks before sailing towards Cuba.
The Spaniards never bothered to settle in the Bahamas, but the number of shipwrecks attest that their galleons frequently passed through the archipelago en route to and from the Caribbean, Florida, Bermuda, and their home ports. On Eleuthera the explorers dug a fresh-water well — at a spot now known as “Spanish Wells” — which was used to replenish the supplies of water on their ships before they began the long journey back to Europe with their cargoes of South American gold. As for the Lucayans, within 25 years all of them, perhaps some 30,000 people, were removed from the Bahamas to work — and die — in Spanish gold mines and on farms and pearl fisheries on Hispaniola (Haiti), Cuba, and elsewhere in the Caribbean.
```

Note that the recursive option can be combined with other `grep` options; we
will see this when demonstrating other options.

## Line Number `-n`

Many times it is not enough to know which files contain patterns, and it would
be nice to have the exact line numbers at which the pattern occurs. This is what
the `-n` option achieves. We show this by running the same commands as before,
with the change being the addition of this option.

```
$ grep -nr Lucayan written_2/
written_2/travel_guides/berlitz2/Bahamas-WhereToGo.txt:46:Lucaya is set on a fine sandy beach and the expansive Port Lucaya marina gives the whole resort a very nautical feel. A number of large hotels line the Lucayan Beach, their massive façades softened by the hundreds of masts of the yachts moored on the inlet. As of late 1999, the casinos and many of the hotels were being given a facelift and three of the larger hotels on the waterfront were being reconfigured into a single complex.
written_2/travel_guides/berlitz2/Bahamas-WhereToGo.txt:49:Just north of the Marina is the Lucayan Golf and Country Club, which has some of the best-groomed greens in the Bahamas and a very good restaurant for those who want to watch rather than play — diners enjoy panoramic views over the driving range and several holes.
written_2/travel_guides/berlitz2/Bahamas-WhereToGo.txt:56:After traveling approximately 10 miles on the main road you’ll come to Lucaya National Park (there’s a small parking lot on your left). The 40-acre (16-hectare) park sits on both sides of the main road and protects a range of Bahamian ecosystems. Inland, trails lead to one of the largest surveyed cave systems in the world, much of which lies underwater. Ben’s Cave, also known as Bats Cave for reasons that will be obvious when you enter, is the most accessible and in fact rather small. It links to the larger caves through subterranean tunnels. The pool in the bottom has layers of fresh water lying on top of salt water. Remains of several Lucayan Indians that were found at the cave entrance are now being studied in Nassau. The caves are also home to a rare species of crustacean, spelonectes Lucayensis, which is said to resemble a swimming centipede. Ben’s Cave is closed during June and July to protect the bats during the breeding season.
written_2/travel_guides/berlitz2/Bahamas-WhereToGo.txt:59:Heading west from Freeport-Lucaya, you’ll first travel past the cruise port and container port. Across from the entrance to the cruise port is Pier One Restaurant, where you can enjoy wonderful food and feed the sharks that gather underneath the terraces in the evening. Farther west, at Deadman’s Reef, are the remains of an ancient Lucayan settlement discovered in 1996.
written_2/travel_guides/berlitz2/Bahamas-WhereToGo.txt:77:Modern Bahamian history began on this island in 1648 when the Eleutherian Adventurers, led by William Sayle, arrived from Britain and Bermuda and founded their shaky colony. They landed near the site of Governor’s Harbour on the middle of the island, but after a period of feuding Sayle and some of his followers moved north to Harbour Island and Spanish Wells. Their descendants still live there today. Although they named the island Eleuthera, you may find that the local people call the island Cigatoo, its old Lucayan name.
written_2/travel_guides/berlitz2/Bahamas-WhereToGo.txt:97:The name Exuma is said to be a derivation of the two Lucayan Indian words that had been used for this group of islands, yumey and suma. The largest Exuma Cays were settled by British Loyalists following the American Revolution. Chief among these was Dennis Rolle, who brought over 100 slaves with him to start a cotton plantation. This venture began to fail after only a few years but Dennis passed the land onto his son John. In 1834 slavery was abolished and John Rolle freed his slaves and deeded the Rolle land on to them “in commonage” at his death. This allowed only those directly related to the Rolle slaves to farm or build on the inherited land. Today most of the native inhabitants of the Exumas bear the family name Rolle.
written_2/travel_guides/berlitz2/Bahamas-WhereToGo.txt:123:The Spaniards wiped out the population of Lucayan Indians who lived here, and the island remained unpopulated for over 200 years, until it was settled by a number of Loyalist families from the American colonies. They attempted to grow cotton in the thin layer of soil but were unsuccessful, and at the announcement of emancipation they abandoned the island, leaving their slaves behind.
written_2/travel_guides/berlitz2/Bahamas-WhereToGo.txt:126:Traveling south from Stella Maris you’ll pass uninhabited mangrove swamps on the way to the small town of Simms, an unhurried old settlement known for its distinctive straw-work, which craftswomen are delighted to show visitors. At Deadman’s Cay you’ll find an extensive cave system with faded Lucayan rock drawings. After passing small pineapple and banana plantations, you’ll reach attractive Clarence Town, with its two large churches — one Anglican, the other Roman Catholic — built by Cat Island hermit architect Father Jerome. The blue hole at nearby Turtle Cove, a half-mile walk from the road over rough terrain, provides a memorable diving experience, though it’s interesting even from the rim. The hole is about 80 yards (73 m) across and at least 600 ft (183 m) deep; you’ll sometimes see large turtles and tarpon in the waters.
written_2/travel_guides/berlitz2/Bahamas-History.txt:6:Centuries before the arrival of Columbus, a peaceful Amerindian people who called themselves the Luccucairi had settled in the Bahamas. Originally from South America, they had traveled up through the Caribbean islands, surviving by cultivating modest crops and from what they caught from sea and shore. Nothing in the experience of these gentle people could have prepared them for the arrival of the Pinta, the Niña, and the Santa Maria at San Salvador on 12 October 1492. Columbus believed that he had reached the East Indies and mistakenly called these people Indians. We know them today as the Lucayans. Columbus claimed the island and others in the Bahamas for his royal Spanish patrons, but not finding the gold and other riches he was seeking, he stayed for only two weeks before sailing towards Cuba.
written_2/travel_guides/berlitz2/Bahamas-History.txt:7:The Spaniards never bothered to settle in the Bahamas, but the number of shipwrecks attest that their galleons frequently passed through the archipelago en route to and from the Caribbean, Florida, Bermuda, and their home ports. On Eleuthera the explorers dug a fresh-water well — at a spot now known as “Spanish Wells” — which was used to replenish the supplies of water on their ships before they began the long journey back to Europe with their cargoes of South American gold. As for the Lucayans, within 25 years all of them, perhaps some 30,000 people, were removed from the Bahamas to work — and die — in Spanish gold mines and on farms and pearl fisheries on Hispaniola (Haiti), Cuba, and elsewhere in the Caribbean.
```

```
$ grep -r Lucayan written_2/travel_guides/berlitz2/Bahamas-History.txt
6:Centuries before the arrival of Columbus, a peaceful Amerindian people who called themselves the Luccucairi had settled in the Bahamas. Originally from South America, they had traveled up through the Caribbean islands, surviving by cultivating modest crops and from what they caught from sea and shore. Nothing in the experience of these gentle people could have prepared them for the arrival of the Pinta, the Niña, and the Santa Maria at San Salvador on 12 October 1492. Columbus believed that he had reached the East Indies and mistakenly called these people Indians. We know them today as the Lucayans. Columbus claimed the island and others in the Bahamas for his royal Spanish patrons, but not finding the gold and other riches he was seeking, he stayed for only two weeks before sailing towards Cuba.
7:The Spaniards never bothered to settle in the Bahamas, but the number of shipwrecks attest that their galleons frequently passed through the archipelago en route to and from the Caribbean, Florida, Bermuda, and their home ports. On Eleuthera the explorers dug a fresh-water well — at a spot now known as “Spanish Wells” — which was used to replenish the supplies of water on their ships before they began the long journey back to Europe with their cargoes of South American gold. As for the Lucayans, within 25 years all of them, perhaps some 30,000 people, were removed from the Bahamas to work — and die — in Spanish gold mines and on farms and pearl fisheries on Hispaniola (Haiti), Cuba, and elsewhere in the Caribbean.
```

## Suppressing Ouput `-l`

By default, `grep` shows the entire line which contains the pattern. Sometimes,
as with the examples above, this can produce very large outputs. The `-l`
option suppresses the ouput by only showing the files that contain the pattern.

This is useful for recursive searches:

```
$ grep -rl Lucayan written_2/
written_2/travel_guides/berlitz2/Bahamas-WhereToGo.txt
written_2/travel_guides/berlitz2/Bahamas-History.txt
```

Although it can be used for sinlge-file searches, it is not as useful:

```
$ grep -l Lucayan written_2/travel_guides/berlitz2/Bahamas-History.txt
written_2/travel_guides/berlitz2/Bahamas-History.txt
```

## Case Insensitivity `-i`

The `grep` is, by default, case sensitive. For example, searching for `lucayan`
instead of `Lucayan` in the previous commands will not show any output:

```
$ grep -nr lucayan written_2

```

This issue can be alleviated with the `-i` option, which tells `grep` to ignore
the case-ness of potentially matching parts of lines:

```
$ grep -inr lucayan written_2
written_2/travel_guides/berlitz2/Bahamas-WhereToGo.txt:46:Lucaya is set on a fine sandy beach and the expansive Port Lucaya marina gives the whole resort a very nautical feel. A number of large hotels line the Lucayan Beach, their massive façades softened by the hundreds of masts of the yachts moored on the inlet. As of late 1999, the casinos and many of the hotels were being given a facelift and three of the larger hotels on the waterfront were being reconfigured into a single complex.
written_2/travel_guides/berlitz2/Bahamas-WhereToGo.txt:49:Just north of the Marina is the Lucayan Golf and Country Club, which has some of the best-groomed greens in the Bahamas and a very good restaurant for those who want to watch rather than play — diners enjoy panoramic views over the driving range and several holes.
written_2/travel_guides/berlitz2/Bahamas-WhereToGo.txt:56:After traveling approximately 10 miles on the main road you’ll come to Lucaya National Park (there’s a small parking lot on your left). The 40-acre (16-hectare) park sits on both sides of the main road and protects a range of Bahamian ecosystems. Inland, trails lead to one of the largest surveyed cave systems in the world, much of which lies underwater. Ben’s Cave, also known as Bats Cave for reasons that will be obvious when you enter, is the most accessible and in fact rather small. It links to the larger caves through subterranean tunnels. The pool in the bottom has layers of fresh water lying on top of salt water. Remains of several Lucayan Indians that were found at the cave entrance are now being studied in Nassau. The caves are also home to a rare species of crustacean, spelonectes Lucayensis, which is said to resemble a swimming centipede. Ben’s Cave is closed during June and July to protect the bats during the breeding season.
written_2/travel_guides/berlitz2/Bahamas-WhereToGo.txt:59:Heading west from Freeport-Lucaya, you’ll first travel past the cruise port and container port. Across from the entrance to the cruise port is Pier One Restaurant, where you can enjoy wonderful food and feed the sharks that gather underneath the terraces in the evening. Farther west, at Deadman’s Reef, are the remains of an ancient Lucayan settlement discovered in 1996.
written_2/travel_guides/berlitz2/Bahamas-WhereToGo.txt:77:Modern Bahamian history began on this island in 1648 when the Eleutherian Adventurers, led by William Sayle, arrived from Britain and Bermuda and founded their shaky colony. They landed near the site of Governor’s Harbour on the middle of the island, but after a period of feuding Sayle and some of his followers moved north to Harbour Island and Spanish Wells. Their descendants still live there today. Although they named the island Eleuthera, you may find that the local people call the island Cigatoo, its old Lucayan name.
written_2/travel_guides/berlitz2/Bahamas-WhereToGo.txt:97:The name Exuma is said to be a derivation of the two Lucayan Indian words that had been used for this group of islands, yumey and suma. The largest Exuma Cays were settled by British Loyalists following the American Revolution. Chief among these was Dennis Rolle, who brought over 100 slaves with him to start a cotton plantation. This venture began to fail after only a few years but Dennis passed the land onto his son John. In 1834 slavery was abolished and John Rolle freed his slaves and deeded the Rolle land on to them “in commonage” at his death. This allowed only those directly related to the Rolle slaves to farm or build on the inherited land. Today most of the native inhabitants of the Exumas bear the family name Rolle.
written_2/travel_guides/berlitz2/Bahamas-WhereToGo.txt:123:The Spaniards wiped out the population of Lucayan Indians who lived here, and the island remained unpopulated for over 200 years, until it was settled by a number of Loyalist families from the American colonies. They attempted to grow cotton in the thin layer of soil but were unsuccessful, and at the announcement of emancipation they abandoned the island, leaving their slaves behind.
written_2/travel_guides/berlitz2/Bahamas-WhereToGo.txt:126:Traveling south from Stella Maris you’ll pass uninhabited mangrove swamps on the way to the small town of Simms, an unhurried old settlement known for its distinctive straw-work, which craftswomen are delighted to show visitors. At Deadman’s Cay you’ll find an extensive cave system with faded Lucayan rock drawings. After passing small pineapple and banana plantations, you’ll reach attractive Clarence Town, with its two large churches — one Anglican, the other Roman Catholic — built by Cat Island hermit architect Father Jerome. The blue hole at nearby Turtle Cove, a half-mile walk from the road over rough terrain, provides a memorable diving experience, though it’s interesting even from the rim. The hole is about 80 yards (73 m) across and at least 600 ft (183 m) deep; you’ll sometimes see large turtles and tarpon in the waters.
written_2/travel_guides/berlitz2/Bahamas-History.txt:6:Centuries before the arrival of Columbus, a peaceful Amerindian people who called themselves the Luccucairi had settled in the Bahamas. Originally from South America, they had traveled up through the Caribbean islands, surviving by cultivating modest crops and from what they caught from sea and shore. Nothing in the experience of these gentle people could have prepared them for the arrival of the Pinta, the Niña, and the Santa Maria at San Salvador on 12 October 1492. Columbus believed that he had reached the East Indies and mistakenly called these people Indians. We know them today as the Lucayans. Columbus claimed the island and others in the Bahamas for his royal Spanish patrons, but not finding the gold and other riches he was seeking, he stayed for only two weeks before sailing towards Cuba.
written_2/travel_guides/berlitz2/Bahamas-History.txt:7:The Spaniards never bothered to settle in the Bahamas, but the number of shipwrecks attest that their galleons frequently passed through the archipelago en route to and from the Caribbean, Florida, Bermuda, and their home ports. On Eleuthera the explorers dug a fresh-water well — at a spot now known as “Spanish Wells” — which was used to replenish the supplies of water on their ships before they began the long journey back to Europe with their cargoes of South American gold. As for the Lucayans, within 25 years all of them, perhaps some 30,000 people, were removed from the Bahamas to work — and die — in Spanish gold mines and on farms and pearl fisheries on Hispaniola (Haiti), Cuba, and elsewhere in the Caribbean.
```

```
$ grep -in lucayan written_2/travel_guides/berlitz2/Bahamas-History.txt
6:Centuries before the arrival of Columbus, a peaceful Amerindian people who called themselves the Luccucairi had settled in the Bahamas. Originally from South America, they had traveled up through the Caribbean islands, surviving by cultivating modest crops and from what they caught from sea and shore. Nothing in the experience of these gentle people could have prepared them for the arrival of the Pinta, the Niña, and the Santa Maria at San Salvador on 12 October 1492. Columbus believed that he had reached the East Indies and mistakenly called these people Indians. We know them today as the Lucayans. Columbus claimed the island and others in the Bahamas for his royal Spanish patrons, but not finding the gold and other riches he was seeking, he stayed for only two weeks before sailing towards Cuba.
7:The Spaniards never bothered to settle in the Bahamas, but the number of shipwrecks attest that their galleons frequently passed through the archipelago en route to and from the Caribbean, Florida, Bermuda, and their home ports. On Eleuthera the explorers dug a fresh-water well — at a spot now known as “Spanish Wells” — which was used to replenish the supplies of water on their ships before they began the long journey back to Europe with their cargoes of South American gold. As for the Lucayans, within 25 years all of them, perhaps some 30,000 people, were removed from the Bahamas to work — and die — in Spanish gold mines and on farms and pearl fisheries on Hispaniola (Haiti), Cuba, and elsewhere in the Caribbean.
```

Note how the output that `grep` gives still shows the case-correct pattern as it
appears in the file.
